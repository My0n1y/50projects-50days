<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0;
      overflow: hidden;
      min-height: 100vh;
      flex-direction: column;
      background-color: rgba(52, 148, 228);
    }

    .container {
      width: 250px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 5px;
      background-color: transparent;
      margin-top: 10px;
    }

    .cup {
      display: flex;
      justify-content: center;
      flex-direction: column;
      width: 150px;
      height: 350px;
      border: 4px solid blue;
      border-radius: 0 0 40px 40px;
      overflow: hidden;
      background-color: #fff;
    }

    .cup .remained {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      text-align: center;
      flex: 1;
      transition: 0.3s ease;
    }

    .cup .remained span {
      font-size: 20px;
      font-weight: bold;
    }

    .cup .remained small {
      font-size: 12px;
    }

    .cup .percentage {
      background-color: skyblue;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-size: 30px;
      height: 0;
      transition: 0.3s ease;
    }

    .small {
      width: 50px;
      height: 100px;
      border: 3px solid blue;
      border-radius: 0 0 10px 10px;
      background-color: white;
      transition: background 0.5s linear;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .small.active {
      background-color: skyblue;
    }

    h1 {
      color: white;
    }

    h2 {
      color: white;
      margin-bottom: 10px;
    }

    h3 {
      margin-top: 10px;
      color: white;
    }
  </style>
</head>

<body>
  <h1>Drink Water</h1>
  <h2>Goal:2 Liters</h2>
  <div class="cup">
    <div class="remained" id="remained">
      <span id="liters">2L</span>
      <small>Remained</small>
    </div>
    <div class="percentage" id="percentage"></div>
  </div>
  <h3>Select how many glasses of water that you have drank</h3>
  <div class="container">
    <div class="small">250ml</div>
    <div class="small">250ml</div>
    <div class="small">250ml</div>
    <div class="small">250ml</div>
    <div class="small">250ml</div>
    <div class="small">250ml</div>
    <div class="small">250ml</div>
    <div class="small">250ml</div>
  </div>
  <script>
    let cups = document.querySelectorAll('.small')
    let liters = document.getElementById('liters')
    let percentage = document.getElementById('percentage')
    let remained = document.getElementById('remained')
    updateBigCup()
    cups.forEach((cup, index) => {
      cup.addEventListener('click', () => {
        highlightCups(index)
      })
    })
    function highlightCups(index) {
      if (cups[index].classList.contains('active') && !cups[index].nextElementSibling?.classList.contains('active')) {
        index--
      }
      cups.forEach((cup, index2) => {
        if (index2 <= index) {
          cup.classList.add('active')
        } else {
          cup.classList.remove('active')
        }
      })
      updateBigCup()
    }
    function updateBigCup() {
      let fullcups = document.querySelectorAll('.small.active').length
      let totalcups = cups.length
      if (fullcups === 0) {
        percentage.style.visibility = "hidden"
        percentage.style.height = 0
      } else {
        percentage.style.visibility = "visible"
        percentage.style.height = `${fullcups / totalcups * 350}px`
        percentage.innerText = `${fullcups / totalcups * 100}%`
      }
      if (fullcups === totalcups) {
        remained.style.visibility = 'hidden'
        remained.style.height = 0
      } else {
        remained.style.visibility = 'visible'
        remained.style.flex = 1
        liters.innerText = `${2 - (250 * fullcups / 1000)}L`
      }
    }
  </script>
</body>

</html>